<div ng-controller="MemberManager.Dialogs.Member.ExportController">

    <umb-editor-view>

        <form novalidate name="export" class="form-horizontal" val-form-manager>
            <umb-editor-header name="model.title"
                               name-locked="true"
                               hide-alias="true"
                               hide-icon="true"
                               hide-description="true">
            </umb-editor-header>

            <umb-editor-container>
                <umb-box>
                    <umb-box-content class="control-flow-horizontal">
                        <umb-pane>

                            <umb-control-group localize="label" label="@memberManager_exportableRecords">
                                <span><localize key="memberManager_memberCount" tokens="[vm.totalItems]">{{vm.totalItems}} members</localize></span>
                                <div class="alert alert-warning" ng-if="totalItems > 100">
                                    <localize key="memberManager_exportAlert">Exporting a large number of members may take some time.</localize>
                                </div>
                            </umb-control-group>

                            <umb-control-group ng-show="vm.filterData.display"
                                               localize="label" label="@memberManager_exportAppliedFilters">
                                <div class="filter-display">
                                    <div ng-repeat="displayFilter in vm.filterData.display">
                                        <strong>{{displayFilter.title}}</strong>
                                        <span>{{displayFilter.value}}</span>
                                    </div>
                                </div>
                            </umb-control-group>
                        </umb-pane>
                        <umb-pane class="filter-options">
                            <umb-control-group ng-show="vm.columnList && vm.columnList.length > 1"
                                               localize="label,description" label="@memberManager_columns"
                                               description="@memberManager_columnsDescription">
                                <div class="filter-checkbox-list">
                                    <div class="filter-header">
                                        <div>
                                            <label class="control-label" for="column-all">
                                                <input type="checkbox" ng-checked="allSelected(vm.columnList)" ng-click="selectAll(vm.columnList)" id="column-all" />
                                                Select / deselect all columns
                                            </label>
                                        </div>
                                    </div>
                                    <div class="filter-content">
                                        <div ng-repeat="column in vm.columnList">
                                            <label class="control-label" for="column-{{column.id}}">
                                                <input type="checkbox" ng-model="column.selected" id="column-{{column.id}}" />
                                                {{column.name}}
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </umb-control-group>
                        </umb-pane>
                        <umb-pane>
                            <umb-control-group localize="label" label="@memberManager_format">
                                <select ng-model="vm.exportData.format">
                                    <option value="Excel">Excel Spreadsheet (*.xlsx)</option>
                                    <option value="CSV">Comma Separated Values (*.csv)</option>
                                </select>
                            </umb-control-group>
                        </umb-pane>
                    </umb-box-content>
                </umb-box>
            </umb-editor-container>

            <umb-editor-footer>
                <umb-editor-footer-content-right>
                    <umb-button type="button"
                                button-style="link"
                                label-key="general_close"
                                shortcut="esc"
                                action="model.close()">
                    </umb-button>
                    <umb-button type="button"
                                label-key="memberManager_export"
                                shortcut="ctl+e"
                                action="exportRecords()">
                    </umb-button>
                </umb-editor-footer-content-right>
            </umb-editor-footer>

        </form>
    </umb-editor-view>
</div>